<div class="container d-flex flex-column">
  <div class="user profile-card">
    <img
      [src]="profile.backgroundImage || 'assets/images/background.jpg'"
      [srcset]="
        profile.backgroundImage +
        ' 500w, ' +
        profile.backgroundImage +
        ' 1000w, ' +
        profile.backgroundImage +
        ' 1500w'
      "
      sizes="(max-width: 500px) 100vw, (max-width: 1000px) 50vw, 33vw"
      [alt]="profile.backgroundAlt"
      class="background"
    />
    <img
      [src]="profile.imagePath"
      [srcset]="
        profile.imagePath +
        ' 50w, ' +
        profile.imagePath +
        ' 100w, ' +
        profile.imagePath +
        ' 150w'
      "
      sizes="(max-width: 50px) 50px, (max-width: 100px) 100px, 150px"
      [alt]="profile.imageAlt"
      class="profile-image"
    />
    <h2>{{ profile.name }}</h2>
    <p class="username">{{ profile.username }}</p>
    <p class="quote">"{{ profile.aboutMe }}"</p>
    <div class="stats">
      <div class="stat">
        <span>12</span>
        <h3>{{ "dashboard-overview.labels.files" | translate }}</h3>
      </div>
      <div class="stat">
        <span>2{{ "units.gigabyte" | translate }}</span>
        <h3>{{ "dashboard-overview.labels.used" | translate }}</h3>
      </div>
      <div class="stat">
        <span>24,6{{ "units.dollar" | translate }}</span>
        <h3>{{ "dashboard-overview.labels.spent" | translate }}</h3>
      </div>
    </div>
  </div>
  <button class="btn" type="button" #interaction>
    {{ "buttons.click-here-to-edit" | translate }}
  </button>
  @defer(on interaction(interaction) ){
  <div class="row form-container mb-3">
    <div class="col-md-12">
      <h2>{{ "user-profile.edit-profile" | translate }}</h2>
      <form (ngSubmit)="onUpdate(form)" [formGroup]="form">
        <div class="mb-3">
          <label for="profileImage" class="form-label">{{
            "user-profile.upload-image" | translate
          }}</label>
          <input
            type="file"
            class="form-control"
            id="profileImage"
            (change)="onImageSelected($event)"
          />
        </div>
        <div class="mb-3">
          <label for="company" class="form-label"
            >{{ "user-profile.company" | translate }}
          </label>
          <input
            type="text"
            class="form-control"
            id="company"
            value="Add company name"
            formControlName="company"
          />
        </div>
        <div class="mb-3">
          <label for="username" class="form-label">{{
            "form.username" | translate
          }}</label>
          <input
            formControlName="username"
            type="text"
            class="form-control"
            id="username"
            placeholder="{{ 'form.enterUsername' | translate }}"
          />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">{{
            "form.email" | translate
          }}</label>
          <input
            formControlName="email"
            type="email"
            class="form-control"
            id="email"
            placeholder="{{ 'form.enterEmail' | translate }}"
          />
        </div>
        <div class="mb-3">
          <label for="firstName" class="form-label">{{
            "user-profile.first-name" | translate
          }}</label>
          <input
            type="text"
            formControlName="firstName"
            class="form-control"
            id="firstName"
          />
        </div>
        <div class="mb-3">
          <label for="lastName" class="form-label">{{
            "user-profile.last-name" | translate
          }}</label>
          <input
            type="text"
            formControlName="lastName"
            class="form-control"
            id="lastName"
          />
        </div>
        <div class="mb-3">
          <label for="address" class="form-label">{{
            "user-profile.address" | translate
          }}</label>
          <input
            formControlName="address"
            type="text"
            class="form-control"
            id="address"
            placeholder="{{ 'user-profile.address' | translate }}"
          />
        </div>
        <div class="row mb-3">
          <div class="col">
            <label for="city" class="form-label">{{
              "user-profile.city" | translate
            }}</label>
            <input
              type="text"
              class="form-control"
              id="city"
              formControlName="city"
              placeholder="{{ 'user-profile.city' | translate }}"
            />
          </div>
          <div class="col">
            <label for="country" class="form-label">{{
              "user-profile.country" | translate
            }}</label>
            <input
              formControlName="country"
              type="text"
              class="form-control"
              id="country"
              placeholder="{{ 'user-profile.country' | translate }}"
            />
          </div>
          <div class="col">
            <label for="postalCode" class="form-label">{{
              "user-profile.postal-code" | translate
            }}</label>
            <input
              formControlName="postalCode"
              type="text"
              class="form-control"
              id="postalCode"
              placeholder="{{ 'user-profile.zip-code' | translate }}"
            />
          </div>
        </div>
        <div class="mb-3">
          <label for="aboutMe" class="form-label">{{
            "user-profile.about-me" | translate
          }}</label>
          <textarea
            formControlName="aboutMe"
            class="form-control"
            id="aboutMe"
            rows="3"
          ></textarea>
        </div>
        <button type="submit" class="btn mb-2">
          {{ "user-profile.update-profile" | translate }}
        </button>
      </form>
    </div>
  </div>
  }
</div>
